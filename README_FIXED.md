# CDAnet è®­ç»ƒä¿®å¤ç‰ˆæœ¬

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶ï¼ˆç²¾ç®€ç‰ˆï¼Œå·²ä¿®å¤å¹¶å¯ä½¿ç”¨ï¼‰

1. **`train_cdanet.py`** - ä¸»è®­ç»ƒè„šæœ¬
   - åŸºäºsourcecodeCDAnetå‚è€ƒå®ç°çš„å®Œæ•´è®­ç»ƒä»£ç 
   - ä½¿ç”¨UNet3D + ImNetæ¶æ„ + ç‰©ç†çº¦æŸ
   - âœ… **å…¼å®¹å‚è€ƒä»£ç ï¼Œå¯ç›´æ¥ä½¿ç”¨**

2. **`convert_existing_data.py`** - æ•°æ®æ ¼å¼è½¬æ¢å™¨
   - å°†ç°æœ‰RBæ•°æ®è½¬æ¢ä¸ºCDAnetå…¼å®¹æ ¼å¼
   - ä¿®å¤é€šé“é¡ºåº: [T,p,u,v] â†’ [p,b,u,w]
   - âœ… **å·²éªŒè¯å·¥ä½œ**

3. **`evaluate_cdanet.py`** - æ¨¡å‹è¯„ä¼°è„šæœ¬
   - è¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹æ€§èƒ½

4. **`visualize_results.py`** - ç»“æœå¯è§†åŒ–è„šæœ¬
   - åˆ›å»ºè®­ç»ƒç»“æœå’Œé¢„æµ‹ç»“æœçš„å¯è§†åŒ–

### æ•°æ®æ–‡ä»¶

- **`rb_data_numerical/rb2d_ra1e+05_consolidated.h5`** - è®­ç»ƒå°±ç»ªæ•°æ®
  - æ ¼å¼: [p,b,u,w] Ã— 2 runs Ã— 25 samples Ã— 128Ã—384
  - âœ… **å·²éªŒè¯æ— NaNå€¼**

### å­˜æ¡£æ–‡ä»¶

- **`archive_old_versions/`** - æ—§ç‰ˆæœ¬æ–‡ä»¶å­˜æ¡£
  - åŒ…å«æ‰€æœ‰ä¹‹å‰æœ‰é—®é¢˜çš„ç‰ˆæœ¬
  - ä»…ä¾›å‚è€ƒï¼Œä¸å»ºè®®ä½¿ç”¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. CDAnetè®­ç»ƒ

```bash
# å®Œæ•´CDAnetè®­ç»ƒ
python3 train_cdanet.py \
    --data_folder ./rb_data_numerical \
    --train_data rb2d_ra1e+05_consolidated.h5 \
    --eval_data rb2d_ra1e+05_consolidated.h5 \
    --epochs 50 \
    --batch_size 2 \
    --lr 0.01 \
    --output_folder ./outputs
```

### 2. è¯„ä¼°å’Œå¯è§†åŒ–

```bash
# è¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹
python3 evaluate_cdanet.py

# åˆ›å»ºç»“æœå¯è§†åŒ–
python3 visualize_results.py
```

### 3. é‡æ–°è½¬æ¢æ•°æ®ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰

```bash
# å¦‚æœéœ€è¦ä»åŸå§‹æ•°æ®é‡æ–°è½¬æ¢
python3 convert_existing_data.py
```

## âœ… ä¿®å¤çš„é—®é¢˜

1. **æ•°æ®æ ¼å¼ä¸å…¼å®¹** â†’ ä¿®å¤é€šé“é¡ºåºå’Œæ•°æ®ç»“æ„
2. **è®­ç»ƒLosså·¨å¤§** â†’ ä¿®å¤å½’ä¸€åŒ–å’Œæ¨¡å‹æ¶æ„
3. **å¯è§†åŒ–ç»“æœä¸ºç©º** â†’ ä¿®å¤æ•°æ®èŒƒå›´å’Œå¤„ç†æµç¨‹
4. **æ•°å€¼ä¸ç¨³å®š** â†’ ä½¿ç”¨ç¨³å®šçš„æ•°æ®è½¬æ¢è€Œéæ•°å€¼ä»¿çœŸ

## ğŸ“Š é¢„æœŸç»“æœ

- âœ… è®­ç»ƒLossåº”æ­£å¸¸ä¸‹é™ï¼ˆ~1e-1 â†’ 1e-3ï¼‰
- âœ… è¯„ä¼°æŒ‡æ ‡RRMSEåº”åœ¨åˆç†èŒƒå›´ï¼ˆ< 0.5ï¼‰
- âœ… å¯è§†åŒ–åº”æ˜¾ç¤ºæœ‰æ„ä¹‰çš„æµåœºç»“æ„
- âœ… æ— NaNæˆ–æ— é™å€¼

## ğŸ”§ æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥CUDAå¯ç”¨æ€§ï¼š`python3 -c "import torch; print(torch.cuda.is_available())"`
2. ç¡®ä¿sourcecodeCDAnetç›®å½•å­˜åœ¨å¹¶åŒ…å«æ‰€éœ€æ¨¡å—
3. æ£€æŸ¥æ•°æ®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹è®­ç»ƒæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

---

**å½“å‰çŠ¶æ€**: âœ… ä¿®å¤å®Œæˆï¼Œå¯æ­£å¸¸ä½¿ç”¨